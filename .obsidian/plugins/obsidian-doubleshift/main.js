/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
__export(exports, {
  default: () => Doubleshift2,
  findCommand: () => findCommand
});
var import_obsidian3 = __toModule(require("obsidian"));

// src/CommandSuggestion.ts
var import_obsidian = __toModule(require("obsidian"));
var commandSuggestion = class extends import_obsidian.FuzzySuggestModal {
  constructor(app2, plugin, shortcut) {
    super(app2);
    this.plugin = plugin;
    this.shortcut = shortcut;
    this.setPlaceholder(findCommand(this.plugin.settings.command).name);
    this.open();
  }
  getItems() {
    return Object.values(this.plugin.commands);
  }
  getItemText(command) {
    return command.name;
  }
  onChooseItem(item, evt) {
    let command = findCommand(this.getItemText(item));
    this.shortcut.command = command.id;
    this.plugin.saveSettings();
  }
};

// src/DoubleshiftSettings.ts
var import_obsidian2 = __toModule(require("obsidian"));

// src/Shortcut.ts
var ShortcutCreator = class {
  constructor(plugin) {
    let shortcut = new class {
      constructor() {
        this.command = "";
        this.key = "Shift";
        this.lastKeyUpTime = Date.now();
      }
    }();
    new commandSuggestion(plugin.app, plugin, shortcut);
    plugin.settings.shortcuts.push(shortcut);
  }
};

// src/DoubleshiftSettings.ts
var DoubleshiftSettings = class extends import_obsidian2.PluginSettingTab {
  constructor(app2, plugin, commands) {
    super(app2, plugin);
    this.plugin = plugin;
    this.commands = commands;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("Delay").setDesc("The maximum delay between two presses of the respective key in 1/10 of a second").setTooltip("depending on how fast you type a too high number might annoy you").addSlider((component) => {
      component.setValue(this.plugin.settings.delay / 10).setDynamicTooltip().onChange((value) => __async(this, null, function* () {
        this.plugin.settings.delay = Number(value * 10);
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Shortcuts").setDesc("all shortcuts you have currently set up").setHeading().setDisabled(true);
    this.plugin.settings.shortcuts.forEach((shortcut) => {
      let available = findCommand(shortcut.command) !== null;
      let s = new import_obsidian2.Setting(containerEl).addText((component) => {
        component.setValue(shortcut.key).setPlaceholder("Shift").onChange((value) => {
          shortcut.key = value;
          this.plugin.saveSettings();
        });
      }).addButton((component) => {
        let commandName;
        if (available) {
          commandName = findCommand(shortcut.command).name;
        } else {
          commandName = "";
        }
        component.setButtonText("select command").setTooltip(commandName).onClick(() => {
          new commandSuggestion(this.app, this.plugin, shortcut);
          component.setTooltip(commandName);
          containerEl.empty();
          this.display();
        });
      }).addButton((component) => {
        component.setIcon("trash").onClick(() => {
          this.plugin.settings.shortcuts.remove(shortcut);
          this.plugin.saveSettings();
          containerEl.empty();
          this.display();
        });
      });
      if (!available) {
        s.setDesc("the corresponding plugin has been disabled or uninstalled");
      }
    });
    new import_obsidian2.Setting(containerEl).addButton((component) => {
      component.setButtonText("Add").onClick(() => {
        new ShortcutCreator(this.plugin);
        this.plugin.saveSettings();
        containerEl.empty();
        this.display();
      });
    });
  }
};

// src/main.ts
function findCommand(a) {
  let commands = Object.values(this.app.commands.commands);
  for (let i = 0; i < commands.length; i++) {
    let command = commands[i];
    if (command.id === a || command.name === a) {
      return command;
    }
  }
  return null;
}
var DEFAULT_SETTINGS = {
  command: "command-palette:open",
  delay: 500,
  key: "Shift",
  shortcuts: [new class {
    constructor() {
      this.command = "command-palette:open";
      this.key = "Shift";
      this.lastKeyUpTime = Date.now();
    }
  }()]
};
var Doubleshift2 = class extends import_obsidian3.Plugin {
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
      this.commands = Object.values(this.app.commands.commands);
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.addSettingTab(new DoubleshiftSettings(this.app, this, this.commands));
      this.registerDomEvent(window, "keyup", (event) => this.doubleshift(event.key));
    });
  }
  doubleshift(key) {
    this.settings.shortcuts.forEach((shortcut) => {
      if (key !== shortcut.key) {
        shortcut.lastKeyUpTime = 0;
        return;
      }
      if (Date.now() - shortcut.lastKeyUpTime < this.settings.delay) {
        shortcut.lastKeyUpTime = 0;
        app.commands.executeCommandById(shortcut.command);
      } else {
        shortcut.lastKeyUpTime = Date.now();
      }
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL0NvbW1hbmRTdWdnZXN0aW9uLnRzIiwgInNyYy9Eb3VibGVzaGlmdFNldHRpbmdzLnRzIiwgInNyYy9TaG9ydGN1dC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtDb21tYW5kLCBQbHVnaW59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERvdWJsZXNoaWZ0U2V0dGluZ3MgfSBmcm9tICcuL0RvdWJsZXNoaWZ0U2V0dGluZ3MnO1xuaW1wb3J0IHtTaG9ydGN1dH0gZnJvbSBcIi4vU2hvcnRjdXRcIjtcblxuaW50ZXJmYWNlIFNldHRpbmdzIHtcblx0Y29tbWFuZDogc3RyaW5nO1xuXHRkZWxheTogbnVtYmVyO1xuXHRrZXk6IHN0cmluZztcblx0c2hvcnRjdXRzOiBTaG9ydGN1dFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZENvbW1hbmQoYTogc3RyaW5nKTogQ29tbWFuZHtcblx0bGV0IGNvbW1hbmRzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmFwcC5jb21tYW5kcy5jb21tYW5kcyk7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgY29tbWFuZHMubGVuZ3RoOyBpKyspIHtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0bGV0IGNvbW1hbmQ6IENvbW1hbmQgPSBjb21tYW5kc1tpXTtcblx0XHRpZihjb21tYW5kLmlkID09PSBhIHx8IGNvbW1hbmQubmFtZSA9PT0gYSkge1xuXHRcdFx0cmV0dXJuIGNvbW1hbmQ7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBudWxsO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQYXJ0aWFsPFNldHRpbmdzPiA9IHtcblx0Y29tbWFuZDogJ2NvbW1hbmQtcGFsZXR0ZTpvcGVuJyxcblx0ZGVsYXk6IDUwMCxcblx0a2V5OiAnU2hpZnQnLFxuXHRzaG9ydGN1dHM6IFtuZXcgY2xhc3MgaW1wbGVtZW50cyBTaG9ydGN1dCB7XG5cdFx0Y29tbWFuZCA9ICdjb21tYW5kLXBhbGV0dGU6b3Blbic7XG5cdFx0a2V5ID0gJ1NoaWZ0Jztcblx0XHRsYXN0S2V5VXBUaW1lID0gRGF0ZS5ub3coKTtcblx0fV1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRG91Ymxlc2hpZnQgZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogU2V0dGluZ3M7XG5cdGNvbW1hbmRzOiBDb21tYW5kW107XG5cdGxhc3RLZXl1cFRpbWU6IG51bWJlcjtcblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHRoaXMuY29tbWFuZHMgPSBPYmplY3QudmFsdWVzKHRoaXMuYXBwLmNvbW1hbmRzLmNvbW1hbmRzKTtcblx0fVxuXG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRG91Ymxlc2hpZnRTZXR0aW5ncyh0aGlzLmFwcCwgdGhpcywgdGhpcy5jb21tYW5kcykpO1xuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudCh3aW5kb3csICdrZXl1cCcsIChldmVudCkgPT4gdGhpcy5kb3VibGVzaGlmdChldmVudC5rZXkpKTtcblx0fVxuXG5cdGRvdWJsZXNoaWZ0KGtleTogc3RyaW5nKSB7XG5cdFx0dGhpcy5zZXR0aW5ncy5zaG9ydGN1dHMuZm9yRWFjaChzaG9ydGN1dCA9PiB7XG5cdFx0XHRpZiAoa2V5ICE9PSBzaG9ydGN1dC5rZXkpIHtcblx0XHRcdFx0c2hvcnRjdXQubGFzdEtleVVwVGltZSA9IDA7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmIChEYXRlLm5vdygpIC0gc2hvcnRjdXQubGFzdEtleVVwVGltZSA8IHRoaXMuc2V0dGluZ3MuZGVsYXkpIHtcblx0XHRcdFx0c2hvcnRjdXQubGFzdEtleVVwVGltZSA9IDA7XG5cblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRhcHAuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKHNob3J0Y3V0LmNvbW1hbmQpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzaG9ydGN1dC5sYXN0S2V5VXBUaW1lID0gRGF0ZS5ub3coKTtcblx0XHRcdH1cblx0XHR9KVxuXHR9XG59XG4iLCAiaW1wb3J0IHtBcHAsIENvbW1hbmQsIEZ1enp5U3VnZ2VzdE1vZGFsfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IERvdWJsZXNoaWZ0IGZyb20gXCIuL21haW5cIlxyXG5pbXBvcnQgeyBmaW5kQ29tbWFuZCB9IGZyb20gXCIuL21haW5cIlxyXG5pbXBvcnQge1Nob3J0Y3V0fSBmcm9tIFwiLi9TaG9ydGN1dFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIGNvbW1hbmRTdWdnZXN0aW9uIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8Q29tbWFuZD4ge1xyXG5cclxuXHRwbHVnaW46IERvdWJsZXNoaWZ0O1xyXG5cdHNob3J0Y3V0OiBTaG9ydGN1dDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRG91Ymxlc2hpZnQsIHNob3J0Y3V0OiBTaG9ydGN1dCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5zaG9ydGN1dCA9IHNob3J0Y3V0O1xyXG5cdFx0dGhpcy5zZXRQbGFjZWhvbGRlcihmaW5kQ29tbWFuZCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21tYW5kKS5uYW1lKTtcclxuXHRcdHRoaXMub3BlbigpO1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbXMoKTogQ29tbWFuZFtdIHtcclxuXHRcdHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMucGx1Z2luLmNvbW1hbmRzKTtcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1UZXh0KGNvbW1hbmQ6IENvbW1hbmQpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGNvbW1hbmQubmFtZTtcclxuXHR9XHJcblxyXG5cdG9uQ2hvb3NlSXRlbShpdGVtOiBDb21tYW5kLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcblx0XHRsZXQgY29tbWFuZCA9IGZpbmRDb21tYW5kKHRoaXMuZ2V0SXRlbVRleHQoaXRlbSkpO1xyXG5cdFx0dGhpcy5zaG9ydGN1dC5jb21tYW5kID0gY29tbWFuZC5pZDtcclxuXHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IERvdWJsZXNoaWZ0LCB7ZmluZENvbW1hbmR9IGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHtjb21tYW5kU3VnZ2VzdGlvbn0gZnJvbSBcIi4vQ29tbWFuZFN1Z2dlc3Rpb25cIjtcclxuaW1wb3J0IHtBcHAsIENvbW1hbmQsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmd9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQge1Nob3J0Y3V0Q3JlYXRvcn0gZnJvbSBcIi4vU2hvcnRjdXRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBEb3VibGVzaGlmdFNldHRpbmdzIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblxyXG5cdHBsdWdpbjogRG91Ymxlc2hpZnQ7XHJcblx0Y29tbWFuZHM6IENvbW1hbmRbXTtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRG91Ymxlc2hpZnQsIGNvbW1hbmRzOiBDb21tYW5kW10pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5jb21tYW5kcyA9IGNvbW1hbmRzO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGxldCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiRGVsYXlcIilcclxuXHRcdFx0LnNldERlc2MoXCJUaGUgbWF4aW11bSBkZWxheSBiZXR3ZWVuIHR3byBwcmVzc2VzIG9mIHRoZSByZXNwZWN0aXZlIGtleSBpbiAxLzEwIG9mIGEgc2Vjb25kXCIpXHJcblx0XHRcdC5zZXRUb29sdGlwKFwiZGVwZW5kaW5nIG9uIGhvdyBmYXN0IHlvdSB0eXBlIGEgdG9vIGhpZ2ggbnVtYmVyIG1pZ2h0IGFubm95IHlvdVwiKVxyXG5cdFx0XHQuYWRkU2xpZGVyKCBjb21wb25lbnQgPT4ge1xyXG5cdFx0XHRcdGNvbXBvbmVudFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGF5LzEwKVxyXG5cdFx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsYXkgPSBOdW1iZXIodmFsdWUqMTApXHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIlNob3J0Y3V0c1wiKVxyXG5cdFx0XHQuc2V0RGVzYyhcImFsbCBzaG9ydGN1dHMgeW91IGhhdmUgY3VycmVudGx5IHNldCB1cFwiKVxyXG5cdFx0XHQuc2V0SGVhZGluZygpXHJcblx0XHRcdC5zZXREaXNhYmxlZCh0cnVlKVxyXG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvcnRjdXRzLmZvckVhY2goc2hvcnRjdXQgPT4ge1xyXG5cdFx0XHRsZXQgYXZhaWxhYmxlID0gZmluZENvbW1hbmQoc2hvcnRjdXQuY29tbWFuZCkgIT09IG51bGw7XHJcblx0XHRcdGxldCBzID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LmFkZFRleHQoY29tcG9uZW50ID0+IHtcclxuXHRcdFx0XHRcdGNvbXBvbmVudFxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2hvcnRjdXQua2V5KVxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJTaGlmdFwiKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHNob3J0Y3V0LmtleSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmFkZEJ1dHRvbihjb21wb25lbnQgPT4ge1xyXG5cdFx0XHRcdFx0bGV0IGNvbW1hbmROYW1lOiBzdHJpbmc7XHJcblx0XHRcdFx0XHRpZiAoYXZhaWxhYmxlKSB7XHJcblx0XHRcdFx0XHRcdGNvbW1hbmROYW1lID0gZmluZENvbW1hbmQoc2hvcnRjdXQuY29tbWFuZCkubmFtZTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGNvbW1hbmROYW1lID0gXCJcIlxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Y29tcG9uZW50XHJcblx0XHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwic2VsZWN0IGNvbW1hbmRcIilcclxuXHRcdFx0XHRcdFx0LnNldFRvb2x0aXAoY29tbWFuZE5hbWUpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRuZXcgY29tbWFuZFN1Z2dlc3Rpb24odGhpcy5hcHAsIHRoaXMucGx1Z2luLCBzaG9ydGN1dCk7XHJcblx0XHRcdFx0XHRcdFx0Y29tcG9uZW50LnNldFRvb2x0aXAoY29tbWFuZE5hbWUpO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkQnV0dG9uKGNvbXBvbmVudCA9PiB7XHJcblx0XHRcdFx0XHRjb21wb25lbnRcclxuXHRcdFx0XHRcdFx0LnNldEljb24oXCJ0cmFzaFwiKVxyXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvcnRjdXRzLnJlbW92ZShzaG9ydGN1dCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRpZiAoIWF2YWlsYWJsZSl7XHJcblx0XHRcdFx0cy5zZXREZXNjKFwidGhlIGNvcnJlc3BvbmRpbmcgcGx1Z2luIGhhcyBiZWVuIGRpc2FibGVkIG9yIHVuaW5zdGFsbGVkXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LmFkZEJ1dHRvbihjb21wb25lbnQgPT4ge1xyXG5cdFx0XHRcdGNvbXBvbmVudFxyXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJBZGRcIilcclxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0bmV3IFNob3J0Y3V0Q3JlYXRvcih0aGlzLnBsdWdpbik7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgRG91Ymxlc2hpZnQgZnJvbSBcIi4vbWFpblwiO1xuaW1wb3J0IHtjb21tYW5kU3VnZ2VzdGlvbn0gZnJvbSBcIi4vQ29tbWFuZFN1Z2dlc3Rpb25cIjtcblxuXG5leHBvcnQgaW50ZXJmYWNlIFNob3J0Y3V0e1xuXHRrZXk6IHN0cmluZztcblx0Y29tbWFuZDogc3RyaW5nO1xuXHRsYXN0S2V5VXBUaW1lOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBTaG9ydGN1dENyZWF0b3Ige1xuXHRjb25zdHJ1Y3RvcihwbHVnaW46IERvdWJsZXNoaWZ0KSB7XG5cdFx0bGV0IHNob3J0Y3V0ID0gbmV3IGNsYXNzIGltcGxlbWVudHMgU2hvcnRjdXQge1xuXHRcdFx0Y29tbWFuZCA9IFwiXCJcblx0XHRcdGtleSA9IFwiU2hpZnRcIjtcblx0XHRcdGxhc3RLZXlVcFRpbWUgPSBEYXRlLm5vdygpO1xuXHRcdH1cblx0XHRuZXcgY29tbWFuZFN1Z2dlc3Rpb24ocGx1Z2luLmFwcCwgcGx1Z2luLCBzaG9ydGN1dCk7XG5cdFx0cGx1Z2luLnNldHRpbmdzLnNob3J0Y3V0cy5wdXNoKHNob3J0Y3V0KTtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUE4Qjs7O0FDQTlCLHNCQUE4QztBQUt2QyxzQ0FBZ0Msa0NBQTJCO0FBQUEsRUFLakUsWUFBWSxNQUFVLFFBQXFCLFVBQW9CO0FBQzlELFVBQU07QUFDTixTQUFLLFNBQVM7QUFDZCxTQUFLLFdBQVc7QUFDaEIsU0FBSyxlQUFlLFlBQVksS0FBSyxPQUFPLFNBQVMsU0FBUztBQUM5RCxTQUFLO0FBQUE7QUFBQSxFQUdOLFdBQXNCO0FBQ3JCLFdBQU8sT0FBTyxPQUFPLEtBQUssT0FBTztBQUFBO0FB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
